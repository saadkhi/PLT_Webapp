{% extends "base.html" %}
{% block content %}

<div class="container mx-auto px-6">
      <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl mt-4 sm:mt-6 md:mt-8 text-center font-bold mb-6">{{ category.name }} Projects</h1>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-screen-xl mx-auto overflow-hidden mb-6">
    {% for project in projects %}
      <div class="bg-white shadow-lg rounded-2xl p-6 transition min-w-0">
        {% with images=project.images.all %}
          {% if images %}
            <div class="carousel relative w-full h-50 overflow-hidden rounded-lg mb-4">
              <div class="carousel-container flex transition-transform duration-300 ease-in-out" id="carousel-{{ project.id }}">
                {% for image in images %}
                  <img src="{{ image.image.url }}" alt="{{ image.alt_text|default:project.title }}" class="w-full h-50 object-cover flex-shrink-0">
                {% endfor %}
              </div>
              {% if images|length > 1 %}
                <button class="carousel-btn carousel-prev absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all" data-carousel="{{ project.id }}">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                  </svg>
                </button>
                <button class="carousel-btn carousel-next absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all" data-carousel="{{ project.id }}">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </button>
                <div class="carousel-dots absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2" data-carousel="{{ project.id }}">
                  {% for image in images %}
                    <button class="carousel-dot w-2 h-2 rounded-full bg-white bg-opacity-50 hover:bg-opacity-75 transition-all {% if forloop.first %}bg-opacity-75{% endif %}" data-slide="{{ forloop.counter0 }}"></button>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          {% endif %}
        {% endwith %}
        <h3 class="text-xl font-semibold mb-3 truncate">{{ project.title }}</h3>
        <p class="text-gray-600 mb-4 truncate">{{ project.description }}</p>
        {% if project.link %}
          <a href="{{ project.link }}" target="_blank"
             class="text-black font-medium hover:underline hover:text-orange-500">
            View Project
          </a>
        {% endif %}
      </div>
    {% empty %}
      <p class="text-gray-500 text-center col-span-1 md:col-span-3">No projects found in this category.</p>
    {% endfor %}
  </div>
</div>

{% endblock %}